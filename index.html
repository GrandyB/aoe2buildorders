<!--
    This file is part of https://github.com/GrandyB/aoe2buildorders

    MIT license, use as you wish.

    Build orders are from various sources.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>AoE2 Build Orders - Grandy</title>
        <meta charset="utf-8" />
        <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
        <link href="styles.css" rel="stylesheet" /> 
    </head>

    <body>
        <div id="main">
        </div>
    </body>
    <script type="text/javascript">
        const dom = document.getElementById("main");
        function createBuild(data) {
            var cellsHtml = "";

            Handlebars.registerPartial('step', `
                {{#if resource}}
                    <div class="step resource {{resource}}">
                        <img src="images/resources/{{resource}}.png" /><span>{{amount}}</span>
                    </div>
                {{else if balance}}
                    <div class="step balance">
                        <div class="switch">ðŸ”€</div>
                        <div class="resources">
                            {{#each balance}}
                                <div class="step resource {{res}}"><img src="images/resources/{{res}}.png" /><span>{{amount}}</span></div>
                            {{/each}}
                        </div>
                    </div>
                {{else if build}}
                    <div class="step build">
                        <div class="title">BUILD</div>
                        <div class="buildings">
                            {{#each build}}
                                {{#if building}}
                                    <div class="building"><img src="images/buildings/{{building}}.png" />{{#if amount}}&nbsp;{{amount}}{{/if}}</div>
                                {{else if unit}}
                                    <div class="unit"><img src="images/units/{{unit}}.png" />{{#if amount}}&nbsp;{{amount}}{{/if}}</div>
                                {{/if}}
                            {{/each}}
                        </div>
                    </div>
                {{else if research}}
                    <div class="step research">
                        <div class="title">RESEARCH</div>
                        <div class="researches">
                            {{#each research}}
                                <div class="tech"><img src="images/{{this}}.png" /></div>
                            {{/each}}
                        </div>
                    </div>
                {{else if age}}
                    <div class="step age {{age}}">
                        <img src='images/ages/{{age}}.png' />
                    </div>
                {{/if}}
                `);

            var mainTemplate = Handlebars.compile(`
                <div class='container'>
                    <div class='title'>{{name}}</div><div class="table">
                    <div class="steps">
                        {{#each steps}}
                          {{> step}}
                        {{/each}}
                    </div>
                </div>
                `);
            const html = mainTemplate(data);
            dom.innerHTML += html;
        }

        createBuild({
            name: 'M@A Archers',
            steps: [
                {
                    resource: 'food',
                    amount: 6
                },{
                    resource: 'wood',
                    amount: 4
                },{
                    resource: 'food',
                    amount: 9
                },{
                    resource: 'wood',
                    amount: 1
                },{
                    build: [
                        { building: 'barracks' },
                        { unit: 'militia', amount: 3}
                    ]
                },{
                    resource: 'gold',
                    amount: 2
                },{
                    age: 'feudal'
                },{
                    balance: [
                        { res: 'food', amount: 11 },
                        { res: 'wood', amount: 9 },
                        { res: 'gold', amount: 2 },
                    ]
                },{
                    research: [
                        'units/manatarms', 'techs/doublebitaxe', 'techs/horsecollar'
                    ]
                },{
                    resource: 'wood',
                    amount: 2
                },{
                    resource: 'gold',
                    amount: 8
                }
            ]
        });
    </script>
</html>